{"kind":"Notebook","sha256":"20ae2ad010496f7c06bcf235e17d5018461eff4b24d37cd742fbd7de805bc073","slug":"voting","location":"/chapter7/section5/julia/voting.ipynb","dependencies":[],"frontmatter":{"numbering":{"heading_1":{"enabled":false},"heading_2":{"enabled":false},"heading_3":{"enabled":false},"heading_4":{"enabled":false},"heading_5":{"enabled":false},"heading_6":{"enabled":false}},"kernelspec":{"name":"julia-1.11","display_name":"Julia 1","language":"julia"},"authors":[{"nameParsed":{"literal":"Tobin A. Driscoll","given":"Tobin A.","family":"Driscoll"},"name":"Tobin A. Driscoll","email":"driscoll@udel.edu","id":"contributors-myst-generated-uid-0","corresponding":true},{"nameParsed":{"literal":"Richard J. Braun","given":"Richard J.","family":"Braun"},"name":"Richard J. Braun","id":"contributors-myst-generated-uid-1"}],"github":"https://github.com/fncbook/fnc","math":{"\\float":{"macro":"\\mathbb{F}"},"\\real":{"macro":"\\mathbb{R}"},"\\complex":{"macro":"\\mathbb{C}"},"\\nat":{"macro":"\\mathbb{N}"},"\\integer":{"macro":"\\mathbb{Z}"},"\\rmn":{"macro":"\\mathbb{R}^{#1 \\times #2}"},"\\dd":{"macro":"\\frac{d #1}{d #2}"},"\\ddd":{"macro":"\\frac{d^2 #1}{d #2^2}"},"\\pp":{"macro":"\\frac{\\partial #1}{\\partial #2}"},"\\ppp":{"macro":"\\frac{\\partial^2 #1}{\\partial #2^2}"},"\\ppdd":{"macro":"\\frac{\\partial^2 #1}{\\partial #2 \\partial #3}"},"\\abs":{"macro":"\\left\\lvert #1 \\right\\rvert"},"\\norm":{"macro":"\\left\\lVert #1 \\right\\rVert"},"\\twonorm":{"macro":"\\norm{#1}_2"},"\\onenorm":{"macro":"\\norm{#1}_1"},"\\infnorm":{"macro":"\\norm{#1}_\\infty"},"\\anynorm":{"macro":"\\norm{#1}_#2"},"\\innerprod":{"macro":"\\langle #1,#2 \\rangle"},"\\pr":{"macro":"^{(#1)}"},"\\kron":{"macro":"#1 \\otimes #2"},"\\eye":{"macro":"\\mathbf{e}_#1"},"\\meye":{"macro":"\\mathbf{I}"},"\\Qhat":{"macro":"\\hat{\\mathbf{Q}}"},"\\Rhat":{"macro":"\\hat{\\mathbf{R}}"},"\\bfalpha":{"macro":"\\mathbf{alpha}"},"\\bfdelta":{"macro":"\\mathbf{delta}"},"\\bfzero":{"macro":"\\boldsymbol{0}"},"\\macheps":{"macro":"\\epsilon_\\text{mach}"},"\\fl":{"macro":"\\operatorname{fl}"},"\\diag":{"macro":"\\operatorname{diag}"},"\\ign":{"macro":"\\operatorname{sign}"},"\\Re":{"macro":"\\operatorname{Re}"},"\\Im":{"macro":"\\operatorname{Im}"},"\\ee":{"macro":"\\times 10^"},"\\lnorm":{"macro":"\\|"},"\\rnorm":{"macro":"\\|"},"\\floor":{"macro":"\\lfloor#1\\rfloor"},"\\cI":{"macro":"\\mathcal{I}"},"\\mtx":{"macro":"\\operatorname{mtx}"},"\\myvec":{"macro":"\\operatorname{vec}"},"\\argmin":{"macro":"\\operatorname{argmin}"}},"abbreviations":{"IVP":"initial-value problem","BVP":"boundary-value problem","ONC":"matrix with orthonormal columns","SVD":"singular value decomposition","EVD":"eigenvalue decomposition","SPD":"symmetric positive definite","HPD":"hermitian positive definite","PDE":"partial differential equation","ODE":"ordinary differential equation"},"exports":[{"format":"ipynb","filename":"voting.ipynb","url":"/build/voting-372f23a71150b57d1817dfb737eafbd8.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Demo ","key":"rQ9kKw9QtC"},{"type":"text","value":"7.5.2","key":"ltKx7RXUOT"}],"key":"Hoedit2YIm"}],"identifier":"demo-dimreduce-voting","label":"demo-dimreduce-voting","kind":"proof:example","template":"Example %s","enumerator":"7.5.2","resolved":true,"html_id":"demo-dimreduce-voting","remote":true,"url":"/dimreduce","dataUrl":"/dimreduce.json","key":"nsDn0PLUDE"}],"key":"R8NoMjPkba"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This matrix describes the votes on bills in the 111th session of the United States Senate. (The data set was obtained from [","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wzAYCjse8C"},{"type":"link","url":"https://voteview.com","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​voteview​.com","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OE1t89OePw"}],"urlSource":"https://voteview.com","key":"vbsCAJ6ROT"},{"type":"text","value":"].) Each row is one senator, and each column is a vote item.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oR5ryzATvn"}],"key":"RNj95aGgV8"}],"key":"UDHp3yM7mT"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.status.idle":"2025-01-14T16:05:23.405000Z","iopub.status.busy":"2025-01-14T16:04:46.970000Z","iopub.execute_input":"2025-01-14T16:04:49.599000Z","shell.execute_reply":"2025-01-14T16:05:23.353000Z"}},"children":[{"type":"code","lang":"julia","executable":true,"value":"using JLD2\n@load \"voting.jld2\" A;","key":"xUgRuPfgRJ"},{"type":"output","id":"5JeEBDmZ4_UWiXgYkDAMR","data":[],"key":"zNPTXoU75G"}],"key":"X2WR6f2DPs"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If we visualize the votes (yellow is “yea,” blue is “nay”), we can see great similarity between many rows, reflecting party unity.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CMQEJMJvjF"}],"key":"vWQDWxFhe9"}],"key":"IIutu53Eky"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.status.idle":"2025-01-14T16:06:07.009000Z","iopub.status.busy":"2025-01-14T16:05:23.453000Z","iopub.execute_input":"2025-01-14T16:05:23.460000Z","shell.execute_reply":"2025-01-14T16:06:07.006000Z"}},"children":[{"type":"code","lang":"julia","executable":true,"value":"heatmap(A;\n    color=:viridis,  xlabel=\"bill\",  ylabel=\"senator\",\n    title=\"Votes in 111th U.S. Senate\")","key":"xPI9OOv80h"},{"type":"output","id":"kkgN9nRW-DyfJTA0FthC2","data":[{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"310ddb697b30ea26b40b50c7e631ae4f","path":"/build/310ddb697b30ea26b40b50c7e631ae4f.png"},"text/html":{"content_type":"text/html","hash":"217822a595a229987ef271f1066637a7","path":"/build/217822a595a229987ef271f1066637a7.html"},"image/svg+xml":{"content_type":"image/svg+xml","hash":"696676a8d56f44cabcb87eb1bb32d794","path":"/build/696676a8d56f44cabcb87eb1bb32d794.svg"}}}],"key":"lS0AFDkBrb"}],"key":"gpxtXVXqyn"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We use ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FMO8FpaY0q"},{"type":"crossReference","kind":"equation","identifier":"sing-val-decay","label":"sing-val-decay","children":[{"type":"text","value":"(","key":"xzqO5uib2f"},{"type":"text","value":"7.5.4","key":"UY9kZWYVhZ"},{"type":"text","value":")","key":"axJIjwr5VT"}],"template":"(%s)","enumerator":"7.5.4","resolved":true,"html_id":"sing-val-decay","remote":true,"url":"/dimreduce","dataUrl":"/dimreduce.json","key":"ndoxgDU5Q4"},{"type":"text","value":" to quantify the decay rate of the values.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZyYDAaE0XM"}],"key":"rmjaoLJuUO"}],"key":"YtzIxY97XN"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.status.idle":"2025-01-14T16:06:26.027000Z","iopub.status.busy":"2025-01-14T16:06:07.045000Z","iopub.execute_input":"2025-01-14T16:06:07.045000Z","shell.execute_reply":"2025-01-14T16:06:26.025000Z"}},"children":[{"type":"code","lang":"julia","executable":true,"value":"U, σ, V = svd(A)\nτ = cumsum(σ .^ 2) / sum(σ .^ 2)\nscatter(τ[1:16];\n    xaxis=(\"k\"),  yaxis=(L\"\\tau_k\"),\n    title=\"Fraction of singular value energy\")","key":"DCSyP2m16s"},{"type":"output","id":"XfVW-3O1h06W3JQtpBr-O","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"cc2dc75f5bb545f5c35729b1840b0047","path":"/build/cc2dc75f5bb545f5c35729b1840b0047.png"},"text/html":{"content_type":"text/html","hash":"4add4c6f678ed0a763800ddbc1fb3771","path":"/build/4add4c6f678ed0a763800ddbc1fb3771.html"},"image/svg+xml":{"content_type":"image/svg+xml","hash":"5f2175d9213064bb03c335518c85e65b","path":"/build/5f2175d9213064bb03c335518c85e65b.svg"}}}],"key":"puBu13twuA"}],"key":"zel89trr7x"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The first and second singular triples contain about 58% and 17%, respectively, of the energy of the matrix. All others have far less effect, suggesting that the information is primarily two-dimensional. The first left and right singular vectors also contain interesting structure.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wfwPAhpcnu"}],"key":"IcajkBUVbH"}],"key":"k2DCrcxbcY"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.status.idle":"2025-01-14T16:06:31.085000Z","iopub.status.busy":"2025-01-14T16:06:26.057000Z","iopub.execute_input":"2025-01-14T16:06:26.057000Z","shell.execute_reply":"2025-01-14T16:06:31.084000Z"}},"children":[{"type":"code","lang":"julia","executable":true,"value":"scatter(U[:, 1], label=\"\", layout=(1, 2),\n    xlabel=\"senator\",  title=\"left singular vector\")\nscatter!(V[:, 1], label=\"\", subplot=2,\n    xlabel=\"bill\",  title=\"right singular vector\")","key":"WaZv6asnPM"},{"type":"output","id":"Ma0WYvsPSyUA8Y6iuvpU8","data":[{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f27080bdcf7a66e8ef96a44355914204","path":"/build/f27080bdcf7a66e8ef96a44355914204.png"},"text/html":{"content_type":"text/html","hash":"be8433cdb5be756ff71d6f8c33276e91","path":"/build/be8433cdb5be756ff71d6f8c33276e91.html"},"image/svg+xml":{"content_type":"image/svg+xml","hash":"daaef84dc3318ff50490b21ffccb4657","path":"/build/daaef84dc3318ff50490b21ffccb4657.svg"}}}],"key":"yIwXXCBTMq"}],"key":"xM1ZHznWBT"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Both vectors have values greatly clustered near ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eE4JmcdPRN"},{"type":"inlineMath","value":"\\pm C","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>±</mo><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">\\pm C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord\">±</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span>","key":"v6RQgq64GM"},{"type":"text","value":" for a constant ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KW3sqaLP0K"},{"type":"inlineMath","value":"C","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span>","key":"cUwHA0neT0"},{"type":"text","value":". These can be roughly interpreted as how partisan a particular senator or bill was, and for which political party. Projecting the senators’ vectors into the first two ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IqusDJGUU3"},{"type":"inlineMath","value":"\\mathbf{V}","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">V</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf{V}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6861em;\"></span><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">V</span></span></span></span>","key":"BSV9lpwML9"},{"type":"text","value":"-coordinates gives a particularly nice way to reduce them to two dimensions. Political scientists label these dimensions ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cfq3CGtFtB"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"partisanship","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LZwWjLBYRy"}],"key":"cWX3wbEFDa"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xV55f8hUdp"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"bipartisanship","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fQeQj45ijK"}],"key":"ACJO0OJ7EJ"},{"type":"text","value":". Here we color them by actual party affiliation (also given in the data file): red for Republican, blue for Democrat, and yellow for independent.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KpfdLv3SL7"}],"key":"UPAuxYnjw3"}],"key":"e81YDZeZDW"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.status.idle":"2025-01-14T16:06:35.736000Z","iopub.status.busy":"2025-01-14T16:06:31.109000Z","iopub.execute_input":"2025-01-14T16:06:31.111000Z","shell.execute_reply":"2025-01-14T16:06:35.707000Z"}},"children":[{"type":"code","lang":"julia","executable":true,"value":"x1 = A * V[:, 1];\nx2 = A * V[:, 2];\n\n@load \"voting.jld2\" Rep Dem Ind\nRep = vec(Rep);\nDem = vec(Dem);\nInd = vec(Ind);\nscatter(x1[Dem], x2[Dem];\n    color=:blue,  label=\"D\",\n    xaxis=(\"partisanship\"),  yaxis=(\"bipartisanship\"), \n    title=\"111th US Senate by voting record\")\nscatter!(x1[Rep], x2[Rep], color=:red, label=\"R\")\nscatter!(x1[Ind], x2[Ind], color=:yellow, label=\"I\")","key":"Rzd33GpuHY"},{"type":"output","id":"IvH16n6sP6XTxh9JpNHM6","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"e31b1532762ecbae9a21ff2dc4b864f3","path":"/build/e31b1532762ecbae9a21ff2dc4b864f3.png"},"text/html":{"content_type":"text/html","hash":"3e03944a48859878157ce3dfd7447d1c","path":"/build/3e03944a48859878157ce3dfd7447d1c.html"},"image/svg+xml":{"content_type":"image/svg+xml","hash":"b3b13e53e2ab081635958fc9715d85e1","path":"/build/b3b13e53e2ab081635958fc9715d85e1.svg"}}}],"key":"LVupO0m8aV"}],"key":"bbsxgpgtCx"}],"key":"V06babXe8L"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Hello","url":"/hello","group":"Chapter 7"},"next":{"title":"Sparse","url":"/sparse","group":"Chapter 8"}}},"domain":"http://localhost:3000"}