{"kind":"Notebook","sha256":"44679c8f391544dda9702620f47bc54527b726fb9d68e3b6658c9d1e7e76b33b","slug":"voting-2","location":"/chapter7/section5/python/voting.ipynb","dependencies":[],"frontmatter":{"numbering":{"heading_1":{"enabled":false},"heading_2":{"enabled":false},"heading_3":{"enabled":false},"heading_4":{"enabled":false},"heading_5":{"enabled":false},"heading_6":{"enabled":false}},"kernelspec":{"name":"python3","display_name":"myst","language":"python"},"authors":[{"nameParsed":{"literal":"Tobin A. Driscoll","given":"Tobin A.","family":"Driscoll"},"name":"Tobin A. Driscoll","email":"driscoll@udel.edu","id":"contributors-myst-generated-uid-0","corresponding":true},{"nameParsed":{"literal":"Richard J. Braun","given":"Richard J.","family":"Braun"},"name":"Richard J. Braun","id":"contributors-myst-generated-uid-1"}],"github":"https://github.com/fncbook/fnc","math":{"\\float":{"macro":"\\mathbb{F}"},"\\real":{"macro":"\\mathbb{R}"},"\\complex":{"macro":"\\mathbb{C}"},"\\nat":{"macro":"\\mathbb{N}"},"\\integer":{"macro":"\\mathbb{Z}"},"\\rmn":{"macro":"\\mathbb{R}^{#1 \\times #2}"},"\\dd":{"macro":"\\frac{d #1}{d #2}"},"\\ddd":{"macro":"\\frac{d^2 #1}{d #2^2}"},"\\pp":{"macro":"\\frac{\\partial #1}{\\partial #2}"},"\\ppp":{"macro":"\\frac{\\partial^2 #1}{\\partial #2^2}"},"\\ppdd":{"macro":"\\frac{\\partial^2 #1}{\\partial #2 \\partial #3}"},"\\abs":{"macro":"\\left\\lvert #1 \\right\\rvert"},"\\norm":{"macro":"\\left\\lVert #1 \\right\\rVert"},"\\twonorm":{"macro":"\\norm{#1}_2"},"\\onenorm":{"macro":"\\norm{#1}_1"},"\\infnorm":{"macro":"\\norm{#1}_\\infty"},"\\anynorm":{"macro":"\\norm{#1}_#2"},"\\innerprod":{"macro":"\\langle #1,#2 \\rangle"},"\\pr":{"macro":"^{(#1)}"},"\\kron":{"macro":"#1 \\otimes #2"},"\\eye":{"macro":"\\mathbf{e}_#1"},"\\meye":{"macro":"\\mathbf{I}"},"\\Qhat":{"macro":"\\hat{\\mathbf{Q}}"},"\\Rhat":{"macro":"\\hat{\\mathbf{R}}"},"\\bfalpha":{"macro":"\\mathbf{alpha}"},"\\bfdelta":{"macro":"\\mathbf{delta}"},"\\bfzero":{"macro":"\\boldsymbol{0}"},"\\macheps":{"macro":"\\epsilon_\\text{mach}"},"\\fl":{"macro":"\\operatorname{fl}"},"\\diag":{"macro":"\\operatorname{diag}"},"\\ign":{"macro":"\\operatorname{sign}"},"\\Re":{"macro":"\\operatorname{Re}"},"\\Im":{"macro":"\\operatorname{Im}"},"\\ee":{"macro":"\\times 10^"},"\\lnorm":{"macro":"\\|"},"\\rnorm":{"macro":"\\|"},"\\floor":{"macro":"\\lfloor#1\\rfloor"},"\\cI":{"macro":"\\mathcal{I}"},"\\mtx":{"macro":"\\operatorname{mtx}"},"\\myvec":{"macro":"\\operatorname{vec}"},"\\argmin":{"macro":"\\operatorname{argmin}"}},"abbreviations":{"IVP":"initial-value problem","BVP":"boundary-value problem","ONC":"matrix with orthonormal columns","SVD":"singular value decomposition","EVD":"eigenvalue decomposition","SPD":"symmetric positive definite","HPD":"hermitian positive definite","PDE":"partial differential equation","ODE":"ordinary differential equation"},"exports":[{"format":"ipynb","filename":"voting.ipynb","url":"/fnc/build/voting-679bb5ac7518c5f22113bbcc29656889.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"exec(open(\"../../../python/FNC_init.py\").read())","visibility":"show","key":"wXl8l2IJQY"},{"type":"output","id":"yfgo13FE9BftKfKfE4UhE","data":[],"visibility":"show","key":"jgD1ehldhP"}],"visibility":"remove","key":"UtbclWPa3M"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"crossReference","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Demo ","key":"x9JO1aQAr5"},{"type":"text","value":"7.5.2","key":"ha6DxxP7RQ"}],"key":"oBsTS60w6j"}],"identifier":"demo-dimreduce-voting","label":"demo-dimreduce-voting","kind":"proof:example","template":"Example %s","enumerator":"7.5.2","resolved":true,"html_id":"demo-dimreduce-voting","remote":true,"url":"/dimreduce","dataUrl":"/dimreduce.json","key":"nLfuebmr1d"}],"key":"u2CjUoPDyg"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This matrix describes the votes on bills in the 111th session of the United States Senate. (The data set was obtained from [","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"f8Io7GuFYj"},{"type":"link","url":"https://voteview.com","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​voteview​.com","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lh1mdH3PI7"}],"urlSource":"https://voteview.com","key":"Vgyszkt6GS"},{"type":"text","value":"].) Each row is one senator, and each column is a vote item.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uWoCOGYhz8"}],"key":"QIlaXrdgem"}],"key":"s8KfZxHzR1"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"from scipy.io import loadmat\nvars = loadmat(\"../voting.mat\")    # from the book's website\nA = vars[\"A\"]\nm, n = A.shape\nprint(\"size:\", (m, n))","key":"X5ZppsnBtA"},{"type":"output","id":"ArTjOknAElsQbuqXx5r01","data":[{"name":"stdout","output_type":"stream","text":"size: (112, 696)\n"}],"key":"JFmT7e30Kx"}],"key":"VlJofB43RB"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If we visualize the votes (yellow is “yea,” blue is “nay”), we can see great similarity between many rows, reflecting party unity.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YrnU3yqoFp"}],"key":"RcWOoLHorQ"}],"key":"QVcumy1h5r"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"imshow(A, cmap=\"viridis\")\nxlabel(\"bill\")\nylabel(\"senator\")\ntitle(\"Votes in 111th U.S. Senate\");","key":"lMag3j6m2V"},{"type":"output","id":"zh2SPHER4Kz307rxYW_nl","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"21cbcfbf266d4e5b95f4bb635b11a7e5","path":"/fnc/build/21cbcfbf266d4e5b95f4bb635b11a7e5.png"},"text/plain":{"content":"<Figure size 700x400 with 1 Axes>","content_type":"text/plain"}}}],"key":"ahlF9nvysM"}],"key":"PcQQrPTjZN"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We use ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sItvANQ3h2"},{"type":"crossReference","kind":"equation","identifier":"sing-val-decay","label":"sing-val-decay","children":[{"type":"text","value":"(","key":"m9EexNyZV8"},{"type":"text","value":"7.5.4","key":"BkhGGuTtU3"},{"type":"text","value":")","key":"xiov1nmMne"}],"template":"(%s)","enumerator":"7.5.4","resolved":true,"html_id":"sing-val-decay","remote":true,"url":"/dimreduce","dataUrl":"/dimreduce.json","key":"uGfsb2U3SX"},{"type":"text","value":" to quantify the decay rate of the values.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bOyTsi0f3E"}],"key":"T35ggKGtEa"}],"key":"U5O71898LN"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"from scipy.linalg import svd\nU, sigma, Vt = svd(A)\ntau = cumsum(sigma**2) / sum(sigma**2)\nplot(range(1, 17), tau[:16], \"o\")\nxlabel(\"$k$\")\nylabel(\"$\\tau_k$\")\ntitle(\"Fraction of singular value energy\");","key":"RX8dYsxnsL"},{"type":"output","id":"URoiyGI261axt_h8hTCyd","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"73741733f2e02f178b0fca6e67fde074","path":"/fnc/build/73741733f2e02f178b0fca6e67fde074.png"},"text/plain":{"content":"<Figure size 700x400 with 1 Axes>","content_type":"text/plain"}}}],"key":"OyOHJwpvmE"}],"key":"dc37IPcqRS"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The first and second singular triples contain about 58% and 17%, respectively, of the energy of the matrix. All others have far less effect, suggesting that the information is primarily two-dimensional. The first left and right singular vectors also contain interesting structure.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Gf6xYCm4XC"}],"key":"QTuJMEivsl"}],"key":"viYnF93VCh"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"subplot(1, 2, 1)\nplot(U[:, 0], \"o\")\nxlabel(\"senator\"),title(\"left singular vector\")\nsubplot(1, 2, 2)\nplot(Vt[0, :], \"o\")\nxlabel(\"bill\"), title(\"right singular vector\");","key":"rInRfBN3vO"},{"type":"output","id":"DznsfnUVevTCdRrvyZwaL","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3dc9201974a80ab1b6b86d94de92a4a8","path":"/fnc/build/3dc9201974a80ab1b6b86d94de92a4a8.png"},"text/plain":{"content":"<Figure size 700x400 with 2 Axes>","content_type":"text/plain"}}}],"key":"E9AwkPKODO"}],"key":"I5AJ5086kk"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Both vectors have values greatly clustered near ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aLTgxusCtz"},{"type":"inlineMath","value":"\\pm C","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>±</mo><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">\\pm C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord\">±</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span>","key":"dSeFcwwdrU"},{"type":"text","value":" for a constant ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rKXwnyCnBG"},{"type":"inlineMath","value":"C","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span>","key":"VeqCchNznk"},{"type":"text","value":". These can be roughly interpreted as how partisan a particular senator or bill was, and for which political party. Projecting the senators’ vectors into the first two ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bXjL3ZHR3A"},{"type":"inlineMath","value":"\\mathbf{V}","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">V</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf{V}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6861em;\"></span><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">V</span></span></span></span>","key":"IqInB9fuyd"},{"type":"text","value":"-coordinates gives a particularly nice way to reduce them to two dimensions. Political scientists label these dimensions ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LVdAcG9SYg"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"partisanship","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sgLnUt54UM"}],"key":"EkM6q9Mxky"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WrUuNTJZOU"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"bipartisanship","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hzlbk6aOJs"}],"key":"H0v1Kad6PH"},{"type":"text","value":". Here we color them by actual party affiliation (also given in the data file): red for Republican, blue for Democrat, and yellow for independent.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tC43BDFScJ"}],"key":"jNtX5yXR4P"}],"key":"l9qAoIwRqt"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"x1 = sigma[0] * U[:, 0]\nx2 = sigma[1] * U[:, 1]\n\nRep = vars[\"Rep\"] - 1\nDem = vars[\"Dem\"] - 1\nInd = vars[\"Ind\"] - 1\n\nscatter(x1[Dem], x2[Dem], color=\"blue\", label=\"D\")\nscatter(x1[Rep], x2[Rep], color=\"red\", label=\"R\")\nscatter(x1[Ind], x2[Ind], color=\"darkorange\", label=\"I\")\n\nxlabel(\"partisanship\"),  ylabel(\"bipartisanship\")\nlegend(),  title(\"111th US Senate in 2D\");","key":"hIdVefbH9Q"},{"type":"output","id":"Etijh6sTC_AyBaM9R4KnL","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"56893fd0912b0b81744322decdf57206","path":"/fnc/build/56893fd0912b0b81744322decdf57206.png"},"text/plain":{"content":"<Figure size 700x400 with 1 Axes>","content_type":"text/plain"}}}],"key":"ghRzAu3jUE"}],"key":"Cz3OVgj63e"}],"key":"qSCRsurnJ2"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Hello","url":"/hello-2","group":"Chapter 7"},"next":{"title":"Sparse","url":"/sparse-2","group":"Chapter 8"}}},"domain":"http://localhost:3000"}